# Unity MCP Server - Test Project

This is a minimal Unity project for testing the Unity MCP Server package locally without publishing to UPM.

## How to Use

### 1. Open in Unity

1. Open Unity Hub
2. Click "Add" → "Add project from disk"
3. Select this directory (`TestProject~`)
4. Unity will open the project

The package is already configured in `Packages/manifest.json` with a local file reference:
```json
"com.mezookan.unity-mcp-sharp": "file:../../"
```

This references the package root (two directories up).

### 2. Verify Package Installation

1. Open Unity Package Manager (Window → Package Manager)
2. Select "In Project" from the dropdown
3. You should see "Unity MCP Server" package listed
4. Check for any compilation errors in the Console

### 3. Test the Dashboard

1. Go to `Tools → Unity MCP Server → Dashboard`
2. The dashboard window should open without errors
3. Test all three tabs: Status, Configuration, Logs

### 4. Test with Running Server

#### Start the Server

Option A: Using dotnet (development):
```bash
cd ../Server~
dotnet run
```

Option B: Using Docker:
```bash
cd ../Server~
docker-compose up
```

#### Connect from Unity

1. In the Dashboard, go to the Status tab
2. Click "Connect"
3. Status should show "Connected ✓" in green
4. Check Unity Console for: "Unity MCP Server connected successfully"

### 5. Test Functionality

Once connected, test these features:

**Configuration**:
- Change server URL
- Toggle auto-connect/auto-start
- Save configuration
- Verify settings persist after restart

**Logs**:
- Click "Refresh Logs"
- Server logs should display
- Test "Clear" button

**Console Log Forwarding**:
1. In Unity Console, do: `Debug.Log("Test message")`
2. Server should receive the log (check server console output)

**GameObject Creation**:
1. Create a test scene if needed
2. From server/IDE, call the `unity_create_gameobject` tool
3. GameObject should appear in Hierarchy

## Testing Scenarios

### Scenario 1: Fresh Installation
- [ ] Package installs without errors
- [ ] No missing scripts in Console
- [ ] Dashboard opens successfully
- [ ] All UI elements render correctly

### Scenario 2: Connection Test
- [ ] Start server manually
- [ ] Connect from Unity Dashboard
- [ ] Connection status updates correctly
- [ ] Disconnect works
- [ ] Reconnect works

### Scenario 3: Docker Management
- [ ] "Start Server" downloads image (first time)
- [ ] Container starts successfully
- [ ] "Stop Server" stops container
- [ ] Server logs display correctly
- [ ] Auto-start on Unity launch (if enabled)

### Scenario 4: Real-time Communication
- [ ] Unity logs forward to server
- [ ] Compilation events detected
- [ ] WebSocket connection stays stable
- [ ] No memory leaks during extended use

## Troubleshooting

### Package Not Found

If the package doesn't appear:
1. Check `Packages/manifest.json` has the correct file path
2. Verify the path `../../` points to the repo root (where `package.json` is)
3. Delete `Library/` folder and reopen Unity

### Compilation Errors

If you get compilation errors:
1. Check the Unity Console for specific errors
2. Verify Unity version is 2021.3 or later
3. Make sure all package dependencies resolved

### Server Connection Fails

If Unity can't connect to server:
1. Verify server is running: `curl http://localhost:3727/health`
2. Check server URL in configuration matches
3. Ensure Docker Desktop is running (if using Docker)
4. Check firewall settings

## Project Structure

```
TestProject~/
├── Assets/                  # Unity assets (scenes, scripts, etc.)
├── Packages/
│   └── manifest.json        # Package dependencies with local reference
├── ProjectSettings/
│   └── ProjectVersion.txt   # Unity version
└── README.md               # This file
```

## Notes

- This project is excluded from the Unity package via the tilde (~) suffix
- The `Library/` folder is generated by Unity (gitignored)
- Add test scenes and scripts to `Assets/` as needed
- Project uses Unity 2021.3 LTS (minimum supported version)

## Next Steps After Testing

1. Fix any bugs found
2. Test on different Unity versions
3. Test on different platforms (Mac/Windows/Linux)
4. Add automated tests to `Assets/Tests/`
5. Document any issues in TEST_CHECKLIST.md
